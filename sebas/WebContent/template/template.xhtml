<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
	<link rel="icon" href="#{request.contextPath}/favicon.ico" type="image/x-icon"></link>
	<title><h:outputText value="#{texto.sistema_nome}" /></title>
	<meta name="viewport" content="width=device-width" />
	<h:outputStylesheet library="css" name="css.css" />
	<h:outputScript library="js" name="funcoesBasicas.js"  />
	<ui:insert name="script"/>
</h:head>
<h:body>
	<section>
		<header>
			<span><h:graphicImage library="imagens" name="logo.png" alt="#{texto.sistema_sigla_nome}" /></span>
<!-- 			<h1><h:outputText value="#{texto.sistema_nome}" /></h1> -->
			<p><h:outputText value="#{sessao.usuarioLogado.nome}" rendered="#{sessao.usuarioLogado != null}" /></p><br/><br/>
			<p:inputText placeholder=" Área de consulta geral" style="width: 500px; height: 60px; font-size: 18px"/>
			<p class="linkMenu"><a href="javascript:abrirFecharMenu()">Menu</a></p>
			<div class="limpa"></div>	
		</header>
		<aside>
			<!-- menu principal -->
			<div id="peliculaMenu" onclick="abrirFecharMenu()"></div>
			<ui:include src="menu.xhtml" />

			<!-- mensagens -->
			<p:messages id="growl" showDetail="false" showSummary="true" />

			<!-- conteúdo da página -->
			<div id="conteudo">
				<ui:insert name="corpo" />
			</div>
			
			<!-- alterar senha -->
			<h:form id="formAlterarSenha" >
				<p:dialog id="dialogAlterarSenha" widgetVar="dialogAlterarSenha" 
					resizable="false" closable="true" draggable="false" modal="true"
					header="Alterar senha" style="max-width:400px;" onHide="fecharAlterarSenha();">
					<p:panel id="panelAlterarSenha" header="#{sessao.usuarioLogado.nome}">
					
						<p:messages showDetail="false" showSummary="true" />
						
						<h:panelGrid columns="2" columnClasses="tamanho130">
						
							<h:outputLabel value="Senha atual:" for="senhaAtual">
								<span class="required">*</span>
							</h:outputLabel>
							<p:password id="senhaAtual" value="#{alterarSenhaMB.senhaAtual}"
								required="true" requiredMessage="#{texto.preencha_o_campo_x} Senha atual"
								styleClass="maxCampoSenha" maxlength="10" />						
						
							<h:outputLabel value="Nova senha:" for="novaSenha">
								<span class="required">*</span>
							</h:outputLabel>
							<p:password id="novaSenha" value="#{alterarSenhaMB.novaSenha}"
								required="true" requiredMessage="#{texto.preencha_o_campo_x} Nova senha"
								styleClass="maxCampoSenha" maxlength="10"
								feedback="true" promptLabel="Digite a senha" weakLabel="Fraco" goodLabel="Bom" strongLabel="Forte"
								match="novaSenha2" inline="true"
								validatorMessage="#{texto.senha_diferente}"  />
							
							<h:outputLabel value="Confirmar senha:" for="novaSenha2">
								<span class="required">*</span>
							</h:outputLabel>
							<p:password id="novaSenha2" value="#{alterarSenhaMB.novaSenha2}"
								required="true" requiredMessage="#{texto.preencha_o_campo_x} Confirmar senha"
								styleClass="maxCampoSenha" maxlength="10" />
						</h:panelGrid>
						
						<h:outputText value="#{texto.campos_obrigatorios}" escape="false" />
						
						<p:commandButton icon="ui-icon-disk" 
							value="#{texto.botao_salvar_registro}" title="#{texto.botao_salvar_registro_desc}" 
							action="#{alterarSenhaMB.alterarSenha()}"
							update="panelAlterarSenha" />
						<p:spacer height="5px" />
						<p:commandButton icon="ui-icon-closethick" 
							value="#{texto.botao_cancelar}" title="#{texto.botao_cancelar}" 
							action="#{alterarSenhaMB.cancelar()}"
							update="panelAlterarSenha"
							immediate="true"
							onclick="PF('dialogAlterarSenha').hide();" />
					</p:panel>
				</p:dialog>
				
				<!-- comando ao fechar a janela de alterar senha (mesma execução que clicar em cancelar) -->
				<p:remoteCommand name="fecharAlterarSenha" 
					actionListener="#{alterarSenhaMB.cancelar()}"
					update="panelAlterarSenha"
					immediate="true"
					oncomplete="PF('dialogAlterarSenha').hide();" />
			</h:form>
			
		</aside>
		<footer>
			<h:graphicImage library="imagens" name="logo-governo.jpg" />
		</footer>
	</section>
</h:body>
</html>